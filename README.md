# Two Fragments

## Задание №2
### Создать проект андроид с одной активити, фрагментом и asynctask, в результате которого первый фрагмент заменяется на другой. Описать ситуации, в которых приложение может сломаться. Проект можешь выложить на github.

Самое очевидное место, где это приложение может сломаться - это поворот экрана. Когда экран поворачивается, а asynctask уже работает, наше активити пересоздается и ссылка в asynctask ведет в старое активити. К тому же, так как активити создается с 0, оно может создать еще один asynctask. Что бы такого не произошло с помощью метода onRetainCustomNonConfigurationInstance() передадим ссылку на наш asynctask в новое активити, и при создании вызовем метод getLastCustomNonConfigurationInstance() что бы попытаться получить сохраненую ссылку.

Другая ситуация может возникнуть из за того что мы добавляем первый фрагмент динамически с помощью функции add. Тоесть при перевороте экрана функция add вызовется еще раз. Что бы не  добавлять один тот же фрагмент несколько раз, а также не добавить первый фрагмент уже после замены на второй - присвоим ему тэг. Перед вызовом функции add проверим есть ли уже добавленые фрагменты с таким тэгом.
